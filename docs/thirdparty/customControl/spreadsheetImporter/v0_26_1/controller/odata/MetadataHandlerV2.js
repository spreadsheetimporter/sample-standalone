"use strict";sap.ui.define(["sap/base/Log","./MetadataHandler"],function(e,t){"use strict";function a(e){return e&&e.__esModule&&typeof e.default!=="undefined"?e.default:e}const o=a(t);const n=o.extend("cc.spreadsheetimporter.v0_26_1.MetadataHandlerV2",{constructor:function e(t){o.prototype.constructor.call(this,t)},getLabelList:function t(a,o,n){let r=new Map;const s=n.property;const l=n["sap:label"];e.debug("SpreadsheetUpload: Annotations",undefined,"SpreadsheetUpload: MetadataHandler",()=>this.spreadsheetUploadController.component.logger.returnObject(n));if(!this.spreadsheetUploadController.component.getSpreadsheetFileName()&&l){this.spreadsheetUploadController.component.setSpreadsheetFileName(`${l}.xlsx`)}else if(!this.spreadsheetUploadController.component.getSpreadsheetFileName()&&!l){this.spreadsheetUploadController.component.setSpreadsheetFileName(`Template.xlsx`)}if(a.length>0){for(const t of a){const a=s.find(e=>e.name===t);if(a){let e={};e.label=this.getLabel(n,s,a,t);if(!e.label){e.label=t}e.type=a["type"];e.maxLength=a["maxLength"];r.set(t,e)}else{e.warning(`SpreadsheetUpload: Property ${t} not found`)}}}else{for(const t of s){let a=false;const o=t.name;try{a=t["com.sap.vocabularies.UI.v1.Hidden"].Bool==="true"}catch(a){e.debug(`No hidden property on ${t.name}`,undefined,"SpreadsheetUpload: MetadataHandler")}if(!a&&!o.startsWith("SAP__")){let e={};e.label=this.getLabel(n,s,t,o);e.type=t["type"];e.maxLength=t["maxLength"];r.set(o,e)}}}return r},getLabel:function t(a,o,n,r){let s="";if(n["sap:label"]){s=n["sap:label"]}try{const e=a["com.sap.vocabularies.UI.v1.LineItem"];s=e.find(e=>e.Value.Path===r).Label.String}catch(t){e.debug(`SpreadsheetUpload: ${r} not found as a LineItem Label`,undefined,"SpreadsheetUpload: MetadataHandlerV2")}if(s.startsWith("{")&&s.endsWith("}")){try{s=this.parseI18nText(s,this.spreadsheetUploadController.view)}catch(t){e.debug(`SpreadsheetUpload: ${s} not found as a Resource Bundle and i18n text`,undefined,"SpreadsheetUpload: MetadataHandlerV2")}}if(s===""){s=r}return s},getKeyList:function e(t){let a=[];if(this.spreadsheetUploadController.component.getSkipMandatoryFieldCheck()){return a}for(const e of t.property){const t=e.name;if(t.startsWith("SAP__")){continue}if(!this.spreadsheetUploadController.component.getSkipMandatoryFieldCheck()&&e["com.sap.vocabularies.Common.v1.FieldControl"]&&e["com.sap.vocabularies.Common.v1.FieldControl"]["EnumMember"]&&e["com.sap.vocabularies.Common.v1.FieldControl"]["EnumMember"]==="com.sap.vocabularies.Common.v1.FieldControlType/Mandatory"){a.push(t)}}return a}});return n});
//# sourceMappingURL=MetadataHandlerV2.js.map